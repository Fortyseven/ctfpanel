{% extends "../_layouts/html.twig" %}

{# #################################### #}

{% macro link_render( entry ) %}
    {% if entry.type == "popup-image" %}
        <a
            {% if entry.alt %}title="{{entry.alt}}"{% endif %}
            onclick="openPopupImage('{{entry.url}}')"
        >
            ðŸ’¬ {{entry.name}}
        </a>
    {% else %}
        <a
            {% if entry.alt %}title="{{entry.alt}}"{% endif %}
            href="{{entry.url}}"
        >
            {{entry.name}}
        </a>
    {% endif %}
{% endmacro %}

{# #################################### #}

{% import _self as utils %}

{# #################################### #}

{% block content %}
<main>
    <div id="Links">
    {% for section_name, object in sections %}
        <section>
            <h1>{{section_name}}</h1>
            <ul>
                {% for entry in object.entries %}
                    <li {% if entry.favorite %}class="common"{% endif %}>
                        {{ utils.link_render(entry) }}
                    </li>
                {% endfor %}
            </ul>
            {% if object.subgroups %}
                {% for subgroup in object.subgroups %}
                    <h2>{{subgroup.name}}</h2>
                    <ul>
                        {% for entry in subgroup.entries %}
                            <li {% if entry.favorite %}class="common"{% endif %}>
                                {{ utils.link_render(entry) }}
                            </li>
                        {% endfor %}
                    </ul>
                {% endfor %}
            {% endif %}
        </section>
    {% endfor %}
    </div>

    <hr />

    <div id="Cheats">
        <h1>Cheat Sheets</h1>
        {% for cheat_name, cheat_links in cheats %}
        <details open>
            <summary>{{cheat_name}}</summary>
            <ul>
                {% for link in cheat_links %}
                    <li>
                        {{ utils.link_render(link) }}
                    </li>
                {% endfor %}
            </ul>
        </details>
        {% endfor %}
    </div>
</main>
<div id="PopupContainer" onclick="closePopup()">
    <div class="content"></div>
</div>
{% endblock content %}
